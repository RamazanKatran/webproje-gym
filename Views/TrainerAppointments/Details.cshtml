@model WebProjeGym.Models.Appointment

@{
    ViewData["Title"] = "Randevu Detayı";
}

<h1 class="mt-3">Randevu Detayı</h1>

<div>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            Üye
        </dt>
        <dd class="col-sm-10">
            @(Model.MemberProfile?.FullName ?? Model.MemberProfile?.ApplicationUser?.Email ?? "Bilinmiyor")
        </dd>
        <dt class="col-sm-2">
            Hizmet
        </dt>
        <dd class="col-sm-10">
            @Model.Service?.Name
        </dd>
        <dt class="col-sm-2">
            Tarih
        </dt>
        <dd class="col-sm-10">
            @Model.StartDateTime.ToString("dd.MM.yyyy")
        </dd>
        <dt class="col-sm-2">
            Saat
        </dt>
        <dd class="col-sm-10">
            @Model.StartDateTime.ToString("HH:mm") - @Model.EndDateTime.ToString("HH:mm")
        </dd>
        <dt class="col-sm-2">
            Süre
        </dt>
        <dd class="col-sm-10">
            @Model.DurationMinutes dakika
        </dd>
        <dt class="col-sm-2">
            Fiyat
        </dt>
        <dd class="col-sm-10">
            @Model.Price.ToString("C")
        </dd>
        <dt class="col-sm-2">
            Durum
        </dt>
        <dd class="col-sm-10">
            @if (Model.Status == WebProjeGym.Models.AppointmentStatus.Pending)
            {
                <span class="badge bg-warning">Beklemede</span>
            }
            else if (Model.Status == WebProjeGym.Models.AppointmentStatus.Approved)
            {
                <span class="badge bg-success">Onaylandı</span>
            }
            else if (Model.Status == WebProjeGym.Models.AppointmentStatus.Rejected)
            {
                <span class="badge bg-danger">Reddedildi</span>
            }
            else
            {
                <span class="badge bg-secondary">İptal Edildi</span>
            }
        </dd>
    </dl>
</div>
<div>
    @if (Model.Status == WebProjeGym.Models.AppointmentStatus.Pending)
    {
        <form asp-action="Approve" method="post" style="display:inline;">
            <input type="hidden" name="id" value="@Model.Id" />
            @Html.AntiForgeryToken()
            <button type="submit" class="btn btn-success btn-lg">
                <i class="bi bi-check-circle"></i> Onayla
            </button>
        </form>
        <form asp-action="Reject" method="post" style="display:inline;">
            <input type="hidden" name="id" value="@Model.Id" />
            @Html.AntiForgeryToken()
            <button type="submit" class="btn btn-danger btn-lg" onclick="return confirm('Bu randevuyu reddetmek istediğinizden emin misiniz?');">
                <i class="bi bi-x-circle"></i> Reddet
            </button>
        </form>
    }
    <a class="btn btn-secondary btn-lg" asp-action="Index">
        <i class="bi bi-arrow-left"></i> Listeye Dön
    </a>
</div>

